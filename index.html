<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eyes</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #0a0a0a;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        .eyes-container {
            display: flex;
            gap: 20vw;
            align-items: center;
            transform: scale(1) translate(0, 0);
            transition: transform 0.3s ease-out, gap 0.3s ease-out;
            position: absolute;
            top: 50%;
            left: 50%;
            transform-origin: center center;
        }

        .eyes-container.hidden {
            display: none;
        }

        .eye {
            width: 200px;
            height: 120px;
            cursor: pointer;
            transition: transform 0.1s ease-out;
        }

        .eye.blinking {
            transform: scaleY(0.1);
        }

        .iris {
            transition: transform 1.5s ease-out;
        }

        /* Color animations will be applied per-set via inline styles */
        .iris-main {
            /* No global animation */
        }

        /* Gradient stop animations will be applied per-set via inline styles */
        .iris-gradient-stop-1,
        .iris-gradient-stop-2,
        .iris-gradient-stop-3,
        .iris-gradient-stop-4 {
            /* No global animation */
        }

        @keyframes colorShift1 {
            0% { stop-color: #4CAF50; }      /* Light Green */
            16.67% { stop-color: #D2691E; }  /* Saddle Brown */
            33.33% { stop-color: #6495ED; }  /* Cornflower Blue */
            50% { stop-color: #FFB347; }     /* Light Orange */
            66.67% { stop-color: #F08080; }  /* Light Coral */
            83.33% { stop-color: #FFB6C1; }  /* Light Pink */
            100% { stop-color: #4CAF50; }    /* Back to Light Green */
        }

        @keyframes colorShift2 {
            0% { stop-color: #388E3C; }      /* Medium Green */
            16.67% { stop-color: #A0522D; }  /* Sienna */
            33.33% { stop-color: #4169E1; }  /* Royal Blue */
            50% { stop-color: #FF8C00; }     /* Dark Orange */
            66.67% { stop-color: #DC143C; }  /* Crimson */
            83.33% { stop-color: #FF69B4; }  /* Hot Pink */
            100% { stop-color: #388E3C; }    /* Back to Medium Green */
        }

        @keyframes colorShift3 {
            0% { stop-color: #2E7D32; }      /* Dark Green */
            16.67% { stop-color: #8B4513; }  /* Saddle Brown */
            33.33% { stop-color: #1E90FF; }  /* Dodge Blue */
            50% { stop-color: #FF7F00; }     /* Orange */
            66.67% { stop-color: #B22222; }  /* Fire Brick */
            83.33% { stop-color: #C71585; }  /* Medium Violet Red */
            100% { stop-color: #2E7D32; }    /* Back to Dark Green */
        }

        @keyframes colorShift4 {
            0% { stop-color: #1B5E20; }      /* Very Dark Green */
            16.67% { stop-color: #654321; }  /* Dark Brown */
            33.33% { stop-color: #000080; }  /* Navy */
            50% { stop-color: #CC5500; }     /* Burnt Orange */
            66.67% { stop-color: #800020; }  /* Burgundy */
            83.33% { stop-color: #8B008B; }  /* Dark Magenta */
            100% { stop-color: #1B5E20; }    /* Back to Very Dark Green */
        }

        @keyframes colorShift {
            0% { fill: #228B22; }      /* Green */
            16.67% { fill: #8B4513; }  /* Brown */
            33.33% { fill: #4169E1; }  /* Blue */
            50% { fill: #FF8C00; }     /* Orange */
            66.67% { fill: #DC143C; }  /* Red */
            83.33% { fill: #FF69B4; }  /* Pink */
            100% { fill: #228B22; }    /* Back to Green */
        }

    </style>
</head>
<body>
    <div id="eyes-stage"></div>

    <script>
        // Create eye pair HTML dynamically
        function createEyePair(setId) {
            const container = document.createElement('div');
            container.className = 'eyes-container';
            container.setAttribute('data-set-id', setId);

            container.innerHTML = `
        <!-- Left Eye -->
        <svg class="eye" viewBox="0 0 200 120">
            <!-- Gradients and filters for realistic iris -->
            <defs>
                <radialGradient id="irisGradient1-${setId}" cx="0.3" cy="0.3" r="0.7">
                    <stop class="iris-gradient-stop-1" offset="0%" stop-color="#4CAF50" stop-opacity="0.8"/>
                    <stop class="iris-gradient-stop-2" offset="30%" stop-color="#388E3C" stop-opacity="0.6"/>
                    <stop class="iris-gradient-stop-3" offset="70%" stop-color="#2E7D32" stop-opacity="0.4"/>
                    <stop class="iris-gradient-stop-4" offset="100%" stop-color="#1B5E20" stop-opacity="0.8"/>
                </radialGradient>
                <radialGradient id="irisGradient2-${setId}" cx="0.7" cy="0.4" r="0.6">
                    <stop class="iris-gradient-stop-1" offset="0%" stop-color="#66BB6A" stop-opacity="0.6"/>
                    <stop class="iris-gradient-stop-2" offset="50%" stop-color="#43A047" stop-opacity="0.4"/>
                    <stop class="iris-gradient-stop-4" offset="100%" stop-color="#2E7D32" stop-opacity="0.7"/>
                </radialGradient>
                <radialGradient id="irisGradient3-${setId}" cx="0.5" cy="0.7" r="0.5">
                    <stop class="iris-gradient-stop-1" offset="0%" stop-color="#81C784" stop-opacity="0.5"/>
                    <stop class="iris-gradient-stop-2" offset="60%" stop-color="#4CAF50" stop-opacity="0.3"/>
                    <stop class="iris-gradient-stop-3" offset="100%" stop-color="#388E3C" stop-opacity="0.6"/>
                </radialGradient>
                <filter id="irisBlur-${setId}" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur in="SourceGraphic" stdDeviation="1"/>
                </filter>
                <filter id="irisBlur2-${setId}" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur in="SourceGraphic" stdDeviation="2"/>
                </filter>
            </defs>
            <!-- Eye white (outer oval) -->
            <ellipse class="eye-white" cx="100" cy="60" rx="95" ry="55" fill="white" stroke="#ddd" stroke-width="2"/>

            <!-- Green iris -->
            <g class="iris">
                <!-- Base iris with color-changing gradient -->
                <ellipse class="iris-main" cx="100" cy="60" rx="35" ry="35" fill="#228B22" stroke="#1F5F1F" stroke-width="1"/>
                <!-- Overlapping gradient clouds for texture -->
                <ellipse cx="95" cy="55" rx="28" ry="28" fill="url(#irisGradient1-${setId})" filter="url(#irisBlur-${setId})"/>
                <ellipse cx="105" cy="58" rx="25" ry="25" fill="url(#irisGradient2-${setId})" filter="url(#irisBlur-${setId})"/>
                <ellipse cx="100" cy="65" rx="22" ry="22" fill="url(#irisGradient3-${setId})" filter="url(#irisBlur2-${setId})"/>
                <!-- Additional texture layers -->
                <ellipse cx="92" cy="62" rx="15" ry="15" fill="url(#irisGradient1-${setId})" filter="url(#irisBlur2-${setId})" opacity="0.4"/>
                <ellipse cx="108" cy="55" rx="18" ry="18" fill="url(#irisGradient2-${setId})" filter="url(#irisBlur-${setId})" opacity="0.5"/>
            </g>

            <!-- Black pupil -->
            <g class="iris">
                <ellipse cx="100" cy="60" rx="15" ry="15" fill="#000"/>
                <!-- Lens flare inside pupil -->
                <ellipse cx="95" cy="55" rx="3" ry="4" fill="rgba(255,255,255,0.9)"/>
                <ellipse cx="92" cy="52" rx="1.5" ry="1.5" fill="rgba(255,255,255,0.7)"/>
            </g>
        </svg>

        <!-- Right Eye -->
        <svg class="eye" viewBox="0 0 200 120">
            <!-- Gradients and filters for realistic iris -->
            <defs>
                <radialGradient id="irisGradient1Right-${setId}" cx="0.3" cy="0.3" r="0.7">
                    <stop class="iris-gradient-stop-1" offset="0%" stop-color="#4CAF50" stop-opacity="0.8"/>
                    <stop class="iris-gradient-stop-2" offset="30%" stop-color="#388E3C" stop-opacity="0.6"/>
                    <stop class="iris-gradient-stop-3" offset="70%" stop-color="#2E7D32" stop-opacity="0.4"/>
                    <stop class="iris-gradient-stop-4" offset="100%" stop-color="#1B5E20" stop-opacity="0.8"/>
                </radialGradient>
                <radialGradient id="irisGradient2Right-${setId}" cx="0.7" cy="0.4" r="0.6">
                    <stop class="iris-gradient-stop-1" offset="0%" stop-color="#66BB6A" stop-opacity="0.6"/>
                    <stop class="iris-gradient-stop-2" offset="50%" stop-color="#43A047" stop-opacity="0.4"/>
                    <stop class="iris-gradient-stop-4" offset="100%" stop-color="#2E7D32" stop-opacity="0.7"/>
                </radialGradient>
                <radialGradient id="irisGradient3Right-${setId}" cx="0.5" cy="0.7" r="0.5">
                    <stop class="iris-gradient-stop-1" offset="0%" stop-color="#81C784" stop-opacity="0.5"/>
                    <stop class="iris-gradient-stop-2" offset="60%" stop-color="#4CAF50" stop-opacity="0.3"/>
                    <stop class="iris-gradient-stop-3" offset="100%" stop-color="#388E3C" stop-opacity="0.6"/>
                </radialGradient>
                <filter id="irisBlurRight-${setId}" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur in="SourceGraphic" stdDeviation="1"/>
                </filter>
                <filter id="irisBlur2Right-${setId}" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur in="SourceGraphic" stdDeviation="2"/>
                </filter>
            </defs>
            <!-- Eye white (outer oval) -->
            <ellipse class="eye-white" cx="100" cy="60" rx="95" ry="55" fill="white" stroke="#ddd" stroke-width="2"/>

            <!-- Green iris -->
            <g class="iris">
                <!-- Base iris with color-changing gradient -->
                <ellipse class="iris-main" cx="100" cy="60" rx="35" ry="35" fill="#228B22" stroke="#1F5F1F" stroke-width="1"/>
                <!-- Overlapping gradient clouds for texture -->
                <ellipse cx="95" cy="55" rx="28" ry="28" fill="url(#irisGradient1Right-${setId})" filter="url(#irisBlurRight-${setId})"/>
                <ellipse cx="105" cy="58" rx="25" ry="25" fill="url(#irisGradient2Right-${setId})" filter="url(#irisBlurRight-${setId})"/>
                <ellipse cx="100" cy="65" rx="22" ry="22" fill="url(#irisGradient3Right-${setId})" filter="url(#irisBlur2Right-${setId})"/>
                <!-- Additional texture layers -->
                <ellipse cx="92" cy="62" rx="15" ry="15" fill="url(#irisGradient1Right-${setId})" filter="url(#irisBlur2Right-${setId})" opacity="0.4"/>
                <ellipse cx="108" cy="55" rx="18" ry="18" fill="url(#irisGradient2Right-${setId})" filter="url(#irisBlurRight-${setId})" opacity="0.5"/>
            </g>

            <!-- Black pupil -->
            <g class="iris">
                <ellipse cx="100" cy="60" rx="15" ry="15" fill="#000"/>
                <!-- Lens flare inside pupil -->
                <ellipse cx="95" cy="55" rx="3" ry="4" fill="rgba(255,255,255,0.9)"/>
                <ellipse cx="92" cy="52" rx="1.5" ry="1.5" fill="rgba(255,255,255,0.7)"/>
            </g>
        </svg>
`;
            return container;
        }

        // Eye sets state management
        const eyeSets = [];
        let activeSetIndex = -1;
        const maxSets = 10;

        // Default values for new eye sets
        const defaultState = {
            scale: 1,
            gap: 20,
            posX: 0,
            posY: 0,
            blinkTimeoutId: null,
            moveTimeoutId: null
        };

        // Constants
        const minScale = 0.05;
        const maxScale = 10;
        const scaleStep = 0.05;
        const minGap = -50;
        const maxGap = 200;
        const gapStep = 3;
        const posStep = 40;

        // Per-set blinking function
        function blinkEyeSet(setIndex) {
            const eyeSet = eyeSets[setIndex];
            if (!eyeSet || !eyeSet.visible) return;

            const eyes = eyeSet.element.querySelectorAll('.eye');

            // Add blink class
            eyes.forEach(eye => eye.classList.add('blinking'));

            // Remove blink class after 100ms (blink duration)
            setTimeout(() => {
                eyes.forEach(eye => eye.classList.remove('blinking'));
            }, 100);

            // Schedule next blink randomly between 4-20 seconds
            const nextBlinkDelay = Math.random() * 16000 + 4000; // 4000ms to 20000ms
            eyeSet.blinkTimeoutId = setTimeout(() => blinkEyeSet(setIndex), nextBlinkDelay);
        }

        // Per-set iris movement function
        function moveEyeSetIris(setIndex) {
            const eyeSet = eyeSets[setIndex];
            if (!eyeSet || !eyeSet.visible) return;

            const irises = eyeSet.element.querySelectorAll('.iris');

            // Generate random position within eye bounds
            const maxX = 50; // Maximum horizontal movement
            const maxY = 10; // Maximum vertical movement
            const randomX = (Math.random() - 0.5) * 2 * maxX; // -50 to 50
            const randomY = (Math.random() - 0.5) * 2 * maxY; // -10 to 10

            // Apply movement to all iris groups (iris, pupil, lens flare)
            irises.forEach(iris => {
                iris.style.transform = `translate(${randomX}px, ${randomY}px)`;
            });

            // Schedule next movement randomly between 1-5 seconds
            const nextMoveDelay = Math.random() * 5000 + 1000; // 1000ms to 5000ms
            eyeSet.moveTimeoutId = setTimeout(() => moveEyeSetIris(setIndex), nextMoveDelay);
        }

        // Start all animations for an eye set
        function startEyeSetAnimations(setIndex) {
            const eyeSet = eyeSets[setIndex];
            if (!eyeSet) return;

            // Apply color animations with random delay to desync from other sets
            const randomDelay = Math.random() * 60; // 0-60 seconds
            const animationStyle = `colorShift 60s infinite linear ${randomDelay}s`;
            const gradientAnimations = [
                `colorShift1 60s infinite linear ${randomDelay}s`,
                `colorShift2 60s infinite linear ${randomDelay}s`,
                `colorShift3 60s infinite linear ${randomDelay}s`,
                `colorShift4 60s infinite linear ${randomDelay}s`
            ];

            // Apply animations to iris-main elements
            const irisMainElements = eyeSet.element.querySelectorAll('.iris-main');
            irisMainElements.forEach(elem => {
                elem.style.animation = animationStyle;
            });

            // Apply animations to gradient stops
            const gradientStops = eyeSet.element.querySelectorAll('.iris-gradient-stop-1, .iris-gradient-stop-2, .iris-gradient-stop-3, .iris-gradient-stop-4');
            gradientStops.forEach(stop => {
                if (stop.classList.contains('iris-gradient-stop-1')) {
                    stop.style.animation = gradientAnimations[0];
                } else if (stop.classList.contains('iris-gradient-stop-2')) {
                    stop.style.animation = gradientAnimations[1];
                } else if (stop.classList.contains('iris-gradient-stop-3')) {
                    stop.style.animation = gradientAnimations[2];
                } else if (stop.classList.contains('iris-gradient-stop-4')) {
                    stop.style.animation = gradientAnimations[3];
                }
            });

            // Start blinking with initial random delay (1-3 seconds)
            const initialBlinkDelay = Math.random() * 2000 + 1000;
            eyeSet.blinkTimeoutId = setTimeout(() => blinkEyeSet(setIndex), initialBlinkDelay);

            // Start iris movement with initial random delay (0.5-2 seconds)
            const initialMoveDelay = Math.random() * 1500 + 500;
            eyeSet.moveTimeoutId = setTimeout(() => moveEyeSetIris(setIndex), initialMoveDelay);
        }

        // Stop all animations for an eye set
        function stopEyeSetAnimations(setIndex) {
            const eyeSet = eyeSets[setIndex];
            if (!eyeSet) return;

            // Clear timeout timers
            if (eyeSet.blinkTimeoutId) {
                clearTimeout(eyeSet.blinkTimeoutId);
                eyeSet.blinkTimeoutId = null;
            }
            if (eyeSet.moveTimeoutId) {
                clearTimeout(eyeSet.moveTimeoutId);
                eyeSet.moveTimeoutId = null;
            }

            // Remove color animations
            const irisMainElements = eyeSet.element.querySelectorAll('.iris-main');
            irisMainElements.forEach(elem => {
                elem.style.animation = '';
            });

            const gradientStops = eyeSet.element.querySelectorAll('.iris-gradient-stop-1, .iris-gradient-stop-2, .iris-gradient-stop-3, .iris-gradient-stop-4');
            gradientStops.forEach(stop => {
                stop.style.animation = '';
            });
        }

        // Create or get an eye set
        function getOrCreateEyeSet(setIndex) {
            if (eyeSets[setIndex]) {
                return eyeSets[setIndex];
            }

            // Create new eye set
            const container = createEyePair(setIndex);
            const state = { ...defaultState };

            eyeSets[setIndex] = {
                element: container,
                ...state,
                visible: false
            };

            document.getElementById('eyes-stage').appendChild(container);
            return eyeSets[setIndex];
        }

        // Update eye set transform
        function updateEyeSetTransform(setIndex) {
            const eyeSet = eyeSets[setIndex];
            if (!eyeSet) return;

            const { scale, posX, posY, gap } = eyeSet;
            eyeSet.element.style.transform = `scale(${scale}) translate(${posX}px, ${posY}px)`;
            eyeSet.element.style.gap = `${gap}vw`;
        }

        document.addEventListener('keydown', (event) => {
            const key = event.key.toLowerCase();

            // Number keys 1-0 for eye set toggle (maps to sets 0-9)
            if (key >= '1' && key <= '9') {
                event.preventDefault();
                const setIndex = parseInt(key) - 1;
                toggleEyeSet(setIndex);
                return;
            } else if (key === '0') {
                event.preventDefault();
                toggleEyeSet(9); // 0 key maps to set 9
                return;
            }

            // Control keys only work if there's an active set
            if (activeSetIndex === -1) return;
            const eyeSet = eyeSets[activeSetIndex];

            // Q/W for scale (up/down)
            if (key === 'q') {
                event.preventDefault();
                eyeSet.scale = Math.min(eyeSet.scale + scaleStep, maxScale);
                updateEyeSetTransform(activeSetIndex);
            } else if (key === 'w') {
                event.preventDefault();
                eyeSet.scale = Math.max(eyeSet.scale - scaleStep, minScale);
                updateEyeSetTransform(activeSetIndex);
            }
            // E/R for gap (wider/closer)
            else if (key === 'e') {
                event.preventDefault();
                eyeSet.gap = Math.min(eyeSet.gap + gapStep, maxGap);
                updateEyeSetTransform(activeSetIndex);
            } else if (key === 'r') {
                event.preventDefault();
                eyeSet.gap = Math.max(eyeSet.gap - gapStep, minGap);
                updateEyeSetTransform(activeSetIndex);
            }
            // Arrow keys for position
            else if (event.key === 'ArrowUp') {
                event.preventDefault();
                eyeSet.posY -= posStep;
                updateEyeSetTransform(activeSetIndex);
            } else if (event.key === 'ArrowDown') {
                event.preventDefault();
                eyeSet.posY += posStep;
                updateEyeSetTransform(activeSetIndex);
            } else if (event.key === 'ArrowLeft') {
                event.preventDefault();
                eyeSet.posX -= posStep;
                updateEyeSetTransform(activeSetIndex);
            } else if (event.key === 'ArrowRight') {
                event.preventDefault();
                eyeSet.posX += posStep;
                updateEyeSetTransform(activeSetIndex);
            }
        });

        // Toggle eye set visibility and active state
        function toggleEyeSet(setIndex) {
            if (setIndex < 0 || setIndex >= maxSets) return;

            const eyeSet = getOrCreateEyeSet(setIndex);

            // If this set is active and visible, hide it
            if (activeSetIndex === setIndex && eyeSet.visible) {
                eyeSet.visible = false;
                eyeSet.element.classList.add('hidden');
                stopEyeSetAnimations(setIndex);
                return;
            }

            // If this set exists but is not active, make it active
            if (!eyeSet.visible) {
                eyeSet.visible = true;
                eyeSet.element.classList.remove('hidden');
                // Stop existing animations and restart with fresh timing
                stopEyeSetAnimations(setIndex);
                startEyeSetAnimations(setIndex);
            }

            activeSetIndex = setIndex;
        }

        // Initialize first eye set on page load
        document.addEventListener('DOMContentLoaded', () => {
            // Create and show the first eye set (set 0, accessed by key '1')
            // toggleEyeSet will automatically start its animations
            toggleEyeSet(0);
        });
    </script>
</body>
</html>